manipulateBanner();function manipulateBanner(){var a=$(".about-banner");if(localStorage.minimizedBanner=="true"){toggleBanner(a)}}$(".minimize-banner").click(function(){var a=$(this).closest(".about-banner");toggleBanner(a);localStorage.minimizedBanner=$(".minimized-banner")[0]!=undefined});function toggleBanner(a){a.find(".how-it-works").toggle(300);a.find(".tell-me-more").toggleClass("minimized-banner")}$(function(){$(".answer-form textarea").focus(function(h){var g=$(this).parents(".answer-form");if(g.data("same-author")&&!g.data("warned")){var d=$(".same-author-confirmation");var b=g.find("textarea");var f=g.find("input[type='submit']");var c=$("#wmd-button-bar");var a=g.find("input");b.parent().append(d);d.show();f.addClass("opaque");c.addClass("opaque");a.attr("disabled",true);d.find("button").click(function(){d.hide();b.show();c.removeClass("opaque");f.removeClass("opaque");a.attr("disabled",false);return false});b.hide();g.data("warned",true)}})});$(".approve-news").click(function(b){b.preventDefault();var a=$(this);$.post(a.attr("href"),function(){a.closest(".post-item").removeClass("post-under-review");a.remove()})});$(function(){$(".ban-user").on("click",a);function a(d){d.preventDefault();var c=$(this);$.ajax({url:c.attr("data-url"),method:"POST",beforeSend:function(){b(c.html())},error:function(e){errorPopup("Ocorreu um erro...",c,"center-popup");console.log(e)}});function b(e){e=="Bloquear usuário"?c.html("Desbloquear usuário"):c.html("Bloquear usuário")}}});$(".button-hint").click(function(b){var a=$(this),c=$("#"+a.data("button-hint-id"));$(".button-hint-text").not(c).hide(100);$(".button-hint").not(a).removeClass("active");c.toggle(150);a.toggleClass("active")});$(".history-form").each(function(a,b){$(".history-comparison").prettyTextDiff({originalContainer:".history-current .post-text",changedContainer:$(b).find(".history-version .post-text").first(),diffContainer:$(b).find(".history-diff.post-text").first(),cleanup:true})});$(function(){$(".dropdown-trigger").click(function(a){a.preventDefault();$("#"+$(this).data("target-id")).toggle()})});$(".flag-it").click(function(f){f.preventDefault();var h=$(this);var c=h.parent();var d=h.parents(".comment");var j=new Modal($("#"+h.data("modal-id")));var a=j.element.find("form");var b=a.attr("action");h.toggleClass("selected");d.toggleClass("to-flag");var g={};g["409"]=function(){errorPopup("Você não pode fazer isso.",j.element,"center-popup")};g["400"]=function(){errorPopup("Escolha uma opção.",j.element,"center-popup")};g["403"]=function(){errorPopup("Você deve estar logado.",j.element,"center-popup")};g["200"]=function(){j.hide(200);h.remove()};var i=a.find(".error");a.change(function(){i.text("")});a.submit(function(l){l.preventDefault();var k=a.find("input:radio:checked");if(isEmpty(k)){i.text("Escolha um motivo").show();return}reason=a.find("textarea");if(k.val()=="OTHER"&&isEmpty(reason.val())){i.text("Descreva o motivo").show();return}$.ajax(b,{complete:function(e,m){if(g[e.status]!=undefined){g[e.status].call()}else{errorPopup("Ocorreu um erro.",j,"center-popup");console.log(e)}},data:a.serialize(),headers:{Accept:"application/json"},method:"POST"})})});$(".other-option").change(function(){var a=$(this);a.siblings("#other-reason").show(200)});$(".modal input:not(.other-option)").change(function(){$(".modal #other-reason").hide()});function isEmpty(a){return a.length==0}$("form").not(".ajax").submit(function(c){var b=$(this);if(b.valid()){var a=b.find("input[type=submit]");a.attr("disabled","true");b.addClass("inactive")}});$(function(){$(".hintable").each(function(e,b){var g=$(b),d=g.data("hint-id"),c=$("label[for="+g.attr("id")+"]"),f=$("<a class='hint-anchor' href='#"+d+"'> ?</a>");f.appendTo(c)});var a=function(b){var c=$("#"+$(b).data("hint-id"));if(!$(c).is(":visible")){$(".hint").hide();c.fadeIn(500)}};$(".hintable").focus(function(){a(this)});$(".hintable").focusout(function(){var b=$(".answer-form > .hint");b.fadeOut(500)});$("#question-title").focus()});$(function(){marked.setOptions({sanitize:true});$(".wmd-input").on("keyup",function(){var c=$(this),d=c.closest(".wmd").find(".md-preview");if(c.val().length==0){d.addClass("hidden")}else{d.removeClass("hidden");d.html(marked(c.val()))}});if($(".wmd-panel").length>0){var b=Markdown.getSanitizingConverter();var a=new Markdown.Editor(b);a.run()}});$(function(){jQuery.extend(jQuery.validator.messages,{required:"Este campo é necessário.",email:"Este email não é válido",equalTo:jQuery.validator.format("Os valores inseridos são diferentes."),minlength:jQuery.validator.format("Por favor, insira ao menos {0} caracteres."),maxlength:jQuery.validator.format("Por favor, insira no máximo {0} caracteres.")});$.validator.addMethod("date",function(b,a){if(b.length==0){return true}return b.match(/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/(19[1-9][0-9]|20[01][0-3])$/)},"Esta data não é válida. Utilize uma data no formato dd/mm/yyyy");$.validator.addMethod("brutal-url",function(b,a){if(b.length==0){return true}return b.match(/(www\.)?(.*\.)(.*)/)},"Insira uma url válida!");$(".validated-form").each(function(a,b){$(b).validate({rules:{"passwordConfirmation":{equalTo:"#password"}}})})});$(".hide-next").click(function(){var b=$(this);var a=$(b.next());if(a.css("display")=="block"){a.css("display","none");b.children().attr("class","icon-angle-right")}else{a.css("display","block");b.children().attr("class","icon-angle-down")}});$(window).resize(function(){var b=$(".hide-next");var a=$(b.next());if($(window).width()>=501){if(a.css("display")=="none"){a.css("display","inline-block")}}else{a.css("display","none");b.children().attr("class","icon-angle-right")}});$(".history-select-version").change(function(b){var a=$(this).val();$(".history-forms-area").addClass("hidden").eq(a).removeClass("hidden")});$(".toggle-version").click(function(){$(this).siblings(".history-version").toggleClass("hidden");$(this).siblings(".history-diff").toggleClass("hidden");$(this).siblings(".toggle-version").toggleClass("hidden");$(this).toggleClass("hidden")});$(function(){$(".requires-karma").each(function(c,d){var d=$(d);var a=!d.hasClass("author-cant");var e=parseInt(d.data("karma"));var b=d.data("author");b=b==undefined?false:b;if(a&&b){return}if(!MODERATOR&&e>KARMA){d.off("click");d.click(function(f){f.preventDefault();errorPopup("Você precisa ter "+e+" pontos de reputação!",this)})}});$(".author-cant").each(function(b,c){var c=$(c);var a=c.data("author");if(a){c.off("click");c.click(function(d){d.preventDefault();errorPopup("O autor não pode realizar esta operação!",this)})}});if(!LOGGED_IN){$(".requires-login").off("click");$(".requires-login").bind("click",function(a){a.preventDefault();errorPopup("Você precisa estar logado!",this)})}$(".iframe-load").click(function(){var b=$(this);var a=$("<iframe/>");a.attr("src",b.attr("href"));b.parent().html(a)})});$(function(){$(".mark-as-solution").on("click",a);function a(g){g.preventDefault();var i=$(this);var b=$(i).parent();var d=$(".solution-container");var f=$(d).find(".mark-as-solution");$.ajax({url:i.attr("href"),method:"POST",beforeSend:function(){h()},error:function(j){h();errorPopup("Ocorreu um erro...",i,"center-popup");console.log(j)}});function h(){if(e()){c(d)}c(b)}function e(){return i[0]!=f[0]}function c(j){j.toggleClass("solution-container").toggleClass("not-solution-container")}}});function Modal(b){this.element=$(b);this.closeButton=$(b).find(".modal-close-button");this.toggle();this.closeButton.off("click");this.closeButton.on("click",c);var a=this;function c(d){d.preventDefault();a.toggle()}}Modal.prototype.toggle=function(){this.element.toggleClass("hidden")};Modal.prototype.hide=function(){this.element.hide()};$(".more-comments").click(function(){var a=$(this).siblings(".comment-list").find(".collapsed");a.toggleClass("hidden");if(!a.hasClass("hidden")){$(this).html("Ocultar comentários")}else{$(this).html("Mostrar todos os <strong>"+$(this).attr("size")+"</strong> comentários")}});$(function(){var d="respostas",h="perguntas";WATCHED="acompanhadas";$(".advanced-data-section").on("click",".order-by",function(l){l.preventDefault();var k=$(this);var j=k.attr("href");var n=$("#"+k.data("target-id")).parent();var i=n.find(".subheader");f(k);var m=i[0].outerHTML;$.get(j,function(o){n.html(m+o);b(n,j)})});$(".advanced-data-section").on("click",".pager a",function(k){k.preventDefault();var j=$(this);var l=$("#"+j.data("target-id")).parent();var i=l.find(".subheader")[0].outerHTML;$.get(j.attr("href"),function(m){l.html(i+m);c(j.parent())})});function f(i){$(i).closest(".nav").find(".order-by").removeClass("selected");$(i).addClass("selected")}function c(i){$(i).closest(".pager").find("li").removeClass("current");$(i).addClass("current")}function a(l,k,j){var i="";$(k).each(function(o,p){var n=g(j,p),m=e(j,n,p);i+="<li class='ellipsis advanced-data-line'><span class='counter'>"+p.voteCount+"</span> <a href='"+m+"'>"+n.information.title+"</a></li>"});$(l).html(i)}function e(j,i,k){var l;console.log(i);if(j==d){l="#answer-"+k.id}return"/"+i.id+"-"+i.information.sluggedTitle+l}function g(i,j){if(i==h||i==WATCHED){return j}else{if(i==d){return j.question}}}function b(j,k){var i=$(j).closest(".user-questions").find(".pager");i.find("a").each(function(l,n){var m=$(n).parent();m.removeClass("current");if(l==0){m.addClass("current")}$(n).attr("href",k+"&p="+($(n).html()))})}});$(function(){$("body").on("click",".show-popup",function(a){a.preventDefault();$(this).parent().find(".popup").toggle()});$("body").on("click",".close-popup",function(b){b.preventDefault();var a=$(this);if(a.hasClass("popup")){a.remove()}else{a.closest(".popup").remove()}})});$(function(){var b=$("<div>");b.addClass("question-warnings").html("<h4 class='section-title hint-title'>Reveja o conteúdo da sua postagem:</h4><ul></ul>").hide();$(".validated-form").eq(0).before(b);var d=b.find("ul");function e(h,g,f){if(h){d.append("<li class='hint-tip "+f+"'>"+g+"</li>")}}function c(){if(d.find("li").length!=0){b.show(100)}else{b.hide(100)}}function a(h,j){for(var f in j){var g=j[f];if(h.toLowerCase().indexOf(g.toLowerCase())!=-1){return true}}return false}$("#question-title").keyup(function(){var g=$(this);var h=g.val();var f="title-messages";d.find("li."+f).remove();var i=["ajuda","ajudar","help","socorro","urgente","please"];e(h.toUpperCase()==h&&h.length>1,"Não utilize apenas letras maiúsculas no título",f);e(a(h,i),"Evite usar termos como 'Socorro', 'Urgente', 'Please' no título da sua pergunta",f);e(a(h,["resolvido"]),"Não coloque a palavra 'resolvido' no título, marque a resposta que resolveu sua pergunta como certa",f);c()});$(".description-input").keyup(function(){var g=$(this);var h=g.val();var f="description-messages";d.find("li."+f).remove();var i=["kkk","vc","!!","??","..."];e(h.toUpperCase()==h&&h.length>1,"Não utilize apenas letras maiúsculas na descrição da postagem",f);e(a(h,i),"Deixe sua postagem clara e completa, evite informalidades (como 'vc', 'kkk') ou excesso de pontuação (como !!, ?? e ...)",f);c()})});$(function(){$(".share-button").click(function(){var a=$(this).data("shareurl");window.open(a,"share","width=650, height=450")})});$(function(){d();function d(){g($(".simple-ajax-form a"),"click",a);g($(".simple-ajax-form .cancel"),"click",f);g($("form.ajax"),"submit",b)}function g(h,i,j){h.off(i,j);h.on(i,j)}function a(i){i.preventDefault();var h=$(this).siblings(".ajax-form");h.toggleClass("hidden");h.find(".to-focus").focus()}function f(i){i.preventDefault();var h=$(this).closest("form.ajax");c(h)}function b(h){h.preventDefault();e($(this))}function c(i){var h=i.parent();i.removeClass("inactive");i.find("input[type='submit']").attr("disabled",false);h.addClass("hidden")}function e(j){if(!j.valid()){return}j.find(".submit").attr("disabled",true);j.find(".cancel").attr("disabled",false);var h=function(l){c(j);if(l.status==400){errorPopup("Ocorreu um erro de validação inesperado.",j.parent(),"center-popup");return}errorPopup("Ocorreu um erro.",j.parent(),"center-popup");console.log(l)};var k=function(m,l,n){var p=$("#"+j.data("ajax-result"));if(n.status==201){p.append("<span class='suggestion-accepted'>Sugest&atilde;o enviada!</span>")}else{var o=j.data("ajax-on-callback")||"replace-inner";if(o=="replace-inner"){p.html(m)}else{if(o=="append"){p.append(m)}else{if(o=="replace"){p.replaceWith(m)}}}p.removeClass("hidden")}c(j);d()};var i=j.attr("action");$.ajax(i,{success:k,error:h,dataType:"html",data:j.serialize(),method:"POST"})}});$(function(){var a=window.location.href;$($(".tabs").find("a").get().reverse()).each(function(b,c){if(a.indexOf(c)>=0){$(c).addClass("selected");return false}})});var autoCompleteId;var TagsManager=function(a){$("*:not(.autocomplete)").click(function(){$(".autocompleted-tags").addClass("hidden")});$.getJSON("/pergunta/allTags",function(f){var b=f;var e=$(".autocomplete");for(var d in a){var c=a[d];c.forElement(e,b)}})};var AutoCompleteDOM=function(){var g=TAGS_SPLITTER_CHAR;var h=function(j){j.removeClass("hidden");setLoading(j)};var b=function(m,l,k,j){if(l==undefined||l==g||!l){return}suggestions=c(l,j);d(suggestions,m)};function c(m,k){var l=new RegExp(".*"+m+".*");var j=$(k).map(function(o,n){if(n.name.match(l)){return n}});return i(j,m)}function i(k,j){return k.sort(function(m,l){return m.name.indexOf(j)-l.name.indexOf(j)}).slice(0,9)}var d=function(j,l){if(j.length!=0){var k="";$(j).each(function(n,m){k+="<li class='complete-tag'><a class='tag-brutal'>"+m.name+"</a> x "+m.usageCount;k+="<div class='tag-description'>"+m.description+"</div></li>"});$(l).html(k).removeClass("hidden");$(".autocompleted-tags .complete-tag").click(function(){var m=$(this);e(m.find(".tag-brutal").text())})}else{l.addClass("hidden")}};var e=function(m){var k=$("input[name=tagNames]");var j=k.val();var l=j.split(g);l=l.slice(0,l.length-1);l.push(m);k.val(l.join(g)+g);$(k).valid();k.focus();$(".autocompleted-tags").html("")};function a(j){keyboardCtrlAutoCompleteBox=[13,27,37,38,39,40];return $.inArray(j,keyboardCtrlAutoCompleteBox)<0}function f(j){specialCharacters=["+",".","|","$","*","^","(",")"];pattern=specialCharacters.join("");j=j.replace(new RegExp("(["+pattern+"])","g"),"\\$1");return j}return{forElement:function(k,j){k.keyup(function(o){var m=$(this),n=$("#"+m.data("autocomplete-id")),l=$(m.val().split(g)).last().get(0);if(!l){n.addClass("hidden");return}if(a(o.which)){h(n);clearTimeout(autoCompleteId);autoCompleteId=setTimeout(function(){b(n,f(l),m,j)},100)}})}}};var TagsNavigation=function(){return{forElement:function(a){pos=-3;a.keydown(function(c){arrow={left:37,up:38,right:39,down:40};control={esc:27,enter:13};var b=$(".complete-tag");switch(c.which){case arrow.down:if(pos<b.length-3){pos+=3}break;case arrow.up:if(pos>0){pos-=3}break;case arrow.right:if(pos<b.length-1){pos++}break;case arrow.left:if(pos>0){pos--}break;case control.enter:c.preventDefault();b.eq(pos).click();pos=-3;$(".autocompleted-tags").addClass("hidden");case control.esc:$(".autocompleted-tags").addClass("hidden");break;default:return}b.removeClass("tag-selected");b.eq(pos).addClass("tag-selected")})}}};var TagsValidator=function(){var a=TAGS_SPLITTER_CHAR;return{forElement:function(e,c){var g=$.makeArray($(c).map(function(h,i){return i.name}));var b=[];$.validator.addMethod("only-existent-tags",function(k,i){var h=$($(i).val().split(a));b=d(h,b);var j=b.length<=0;return j},function(){return"Use apenas tags que existem! As seguintes tags não existem: <b>"+b+"</b>"});function d(i,h){h=[];i.each(function(k,j){if(j!=""&&f(g,j)&&f(h,j)){h.push(j)}});return h}function f(i,h){return i.indexOf(h)<0}}}}(function(){var a=[new AutoCompleteDOM(),new TagsNavigation()];if(ANYONE_CAN_CREATE_TAGS!="true"){a.push(new TagsValidator())}new TagsManager(a)}());$(".vote-option").bind("click",function(){if(!$(this).hasClass("stop")){if(!$(this).hasClass("voted")){$(this).addClass("stop");vote($(this))}else{if($(this).hasClass("voted")){$(this).addClass("stop");removeVote($(this))}}}});function vote(c){var a=c.data("value");var b=c.data("type");var e=c.data("id");var d="/"+b+"/"+e+"/voto/"+a;fakeUpdateIncrement(c,a);$.ajax(""+d,{complete:function(g,h){if(g.status=="200"){var f=g.responseText;voteSuccess(c,f)}else{if(g.status=="409"){errorPopup("Você não pode votar na própria questão",c)}else{if(g.status=="403"){errorPopup(g.responseText,c)}else{errorPopup("Ocorreu um erro",c);console.log(g)}}}$(".vote-option").removeClass("stop")},accepts:"application/json",method:"POST"})}function removeVote(c){var a=c.data("value");var b=c.data("type");var e=c.data("id");var d="/"+b+"/"+e+"/voto/remove/"+a;fakeUpdateDecrement(c,a);$.ajax(""+d,{complete:function(g,h){if(g.status=="200"){var f=g.responseText;voteRemovalSuccess(c,f)}else{if(g.status=="409"){errorPopup("Você não pode votar na própria questão",c)}else{if(g.status=="403"){errorPopup(g.responseText,c)}else{errorPopup("Ocorreu um erro",c);console.log(g)}}}$(".vote-option").removeClass("stop")},accepts:"application/json",method:"POST"})}function highlight(a){a.addClass("voted").siblings().removeClass("voted")}function removeHighlight(a){a.removeClass("voted").siblings().removeClass("voted")}function updateCount(b,a){var c=$(b).closest(".vote-container").find(".vote-count");c.text(a)}function fakeUpdateIncrement(c,b){var d;var a=parseInt($(c).closest(".vote-container").find(".vote-count").html());if(b=="positivo"){d=a+1}else{d=a-1}voteSuccess(c,d)}function fakeUpdateDecrement(c,b){var d;var a=parseInt($(c).closest(".vote-container").find(".vote-count").html());if(b=="positivo"){d=a-1}else{d=a+1}voteRemovalSuccess(c,d)}function voteSuccess(b,a){highlight(b);updateCount(b,a)}function voteRemovalSuccess(b,a){removeHighlight(b);updateCount(b,a)}$(function(){$(".watch").on("click",a);function a(e){e.preventDefault();var b=$(this);var d=b.find("span");$.ajax({url:b.attr("href"),method:"POST",beforeSend:function(){c(d)},error:function(f){errorPopup("Ocorreu um erro...",b,"center-popup");console.log(f)}});function c(f){f.toggleClass("icon-muted");f.toggleClass("icon-eye-off");f.toggleClass("icon-eye");if(f.hasClass("icon-muted")){f.attr("title","Clique aqui para ser notificado de novidades nessa questão e suas respostas.")}else{f.attr("title","Clique aqui para cancelar a notificação de novidades nessa questão e suas respostas.")}}}});